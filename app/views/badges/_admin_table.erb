<div class="container">
  <div class="row">
    <div class="col-lg-12 text-center mb-4">
    </div>
  </div>
  <h2 class="text-center">Awarded and Revoked Badges</h2>
  <div class="apple_pagination">
    <%= page_entries_info @order_items_done, model: 'badge' %>
    <%= will_paginate @order_items_done, container: false %>
  </div>
  <% if @order_items_done.present? %>
    <div class="text-center">
      <table class="table table-striped" id="awarded-badge-table">
      <thead class="table-primary">
        <tr>
          <th>Date Updated</th>
          <th>Name</th>
          <th>Badge</th>
          <th>Project</th>
          <th>Status</th>
          <th>Action</th>
        </tr>
      </thead>
        <tbody>
        <% @order_items_done.each do |order_item| %>
          <tr>
            <td><%= order_item.updated_at.strftime('%Y/%m/%d - %H:%M') %></td>
            <td><%= link_to order_item.order.user.name, user_path(order_item.order.user.username, anchor: "badges-manager") %></td>
            <td><%= order_item.proficient_project.badge_template.localized_name %></td>
            <td><%= order_item.proficient_project.title %></td>
            <td><%= order_item.status %></td>
            <% if order_item.status == "Destroyed" %>
              <td><%= link_to 'Award', certify_badges_path(order_item_id: order_item.id), data: { confirm: 'Are you sure? This will give the badge to the user' }, remote: true, class: 'btn btn-primary' %></td>
            <% else %>
              <td><%= button_to 'Destroy', badge_path(order_item), method: :delete, data: { confirm: 'Are you sure? This will revoke the badge that the user received.' }, class: 'btn btn-danger' %></td>
            <% end %>
          </tr>
        <% end %>
        </tbody>
      </table>
    </div>
  <% else %>
    <p class="text-center">No badges awarded/revoked.</p>
  <% end %>

</div>
