<div class="card h-100 shadow">
    <%= link_to repository_path(repository.user_username, repository.slug), class: 'card-img-top border-bottom', style: 'height: 16rem' do %>
        <% if repository.photos.any? %>
            <%= image_tag(url_for(repository.photos.first.image.variant(:repo_display_wrapper)), class: 'w-100 h-100 object-fit-cover') %>
        <% else %>
            <%= image_tag 'C_square.svg', class: 'w-100 h-100 object-fit-fit' %>
        <% end %>
    <% end %>

    <%= link_to repository_path(user_username: repository.user_username, id: repository.slug), class: "card-body py-2 d-flex flex-column" do %>
        <p class="fw-bolder fs-5 line-clamp-3 mb-0"><%= repository.title %></p>
        <p class="line-clamp-3 mb-auto"><%= strip_tags(sanitize(repository.description.truncate(250).split('<br>').first)) %></p>
    <% end %>
    <div class="card-footer d-flex">
        <span class="fw-bolder me-auto">by <%= link_to repository.user_username, user_path(repository.user_username) %></span>
        <span class="text-primary me-2"><%= fa_icon 'heart' %> <%= repository.like %></span>
        <span title="<%= repository.created_at.to_date.to_fs :long %>"><%= repository.created_at.to_date.to_fs :rfc822 %></span>
    </div>
</div>
