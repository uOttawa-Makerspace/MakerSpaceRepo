<section class="container my-5 text-center">
  <h1 class="mb-4"><%= t('job_orders.new.title') %></h1>

  <div class="row justify-content-center gap-4">
    <!-- Ready to Make -->
    <%= form_with url: job_orders_path, method: :post, local: true do |f| %>
      <%= hidden_field_tag 'job_order[job_type_id]', nil %> <!-- JS sets this -->
      <%= hidden_field_tag :redirect_step, 1 %>

      <div class="card p-4 border-success" style="min-width: 280px;">
        <h2 class="h4 text-success mb-3"><%= t('job_orders.new.ready_to_make.title') %></h2>
        <p><%= t('job_orders.new.ready_to_make.description') %></p>
        <%= button_tag t('job_orders.new.ready_to_make.button'), type: 'submit', class: 'btn btn-success btn-lg mt-3 w-100', onclick: "this.form.querySelector('[name=\'job_order[job_type_id]\']').value = #{JobType.find_by(name: 'Ready to Make')&.id || 1}" %>
      </div>
    <% end %>

    <!-- Need Design Help -->
    <%= form_with url: job_orders_path, method: :post, local: true do |f| %>
      <%= hidden_field_tag 'job_order[job_type_id]', 3 %>
      <%= hidden_field_tag :redirect_step, 2 %>

      <div class="card p-4 border-warning" style="min-width: 280px;">
        <h2 class="h4 text-warning mb-3"><%= t('job_orders.new.need_design_help.title') %></h2>
        <p><%= t('job_orders.new.need_design_help.description') %></p>
        <%= button_tag t('job_orders.new.need_design_help.button'), type: 'submit', class: 'btn btn-warning btn-lg mt-3 w-100' %>
      </div>
    <% end %>
  </div>
</section>

<script>
  function prepareForm(mode) {
    const form = document.getElementById('jobOrderForm');
    const stepField = document.getElementById('redirectStep');

    if (mode === 'design_help') {
      stepField.value = 2;
      document.querySelector('[name="job_order[job_type_id]"]').value = 3;
    } else {
      stepField.value = 1;
    }
  }
</script>
