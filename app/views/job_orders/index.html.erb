<% provide :title, t('job_orders.public_page.my_job_orders') %>

<div class="text-center my-2">
  <h1 class="fw-bold"><%= t('job_orders.public_page.my_job_orders') %></h1>
  <%= link_to t('job_orders.public_page.create_a_new_job_order'), new_job_orders_path, class: 'btn btn-primary mb-1' %>
  <%= link_to t('job_orders.public_page.admin_page'), admin_job_orders_path, class: 'btn btn-outline-primary mb-1' if @user.staff? %>
</div>

<% if @drafts.count > 0 %>
  <div class="container alert alert-warning alert-dismissible fade show col-md-12 text-center">
    <i class="fa fa-warning"></i>
    <p class="font-weight-bold"><%= t('job_orders.public_page.job_orders_partly_created') %></p>
    <% @drafts.each do |draft| %>
      <% if draft.job_tasks.any? %>
        <p><%= link_to "#{t('job_orders.public_page.order')} ##{draft.id}", edit_job_order_job_task_path(draft.id, draft.job_tasks.first, step: 1) %></p>
      <% end %>
    <% end %>
    <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
  </div>
<% end %>

<% if @job_orders.count > 0 %>
  <div class="container table-responsive">
    <table class="table table-striped job-order-table">
      <thead class="table-primary">
        <tr class="text-center">
          <th>Chats</th>
          <th>User</th>
          <th>ID</th>
          <th>Submitted</th>
          <th>Type</th>
          <th>Status</th>
          <th>View</th>
        </tr>
      </thead>
      <tbody>
        <% @job_orders.each do |jo| %>
          <tr id="job-order-row-<%= jo.id %>">
            <%= render 'client_row', jo: jo %>
          </tr>
        <% end %>
      </tbody>
    </table>
  </div>
<% else %>
  <div class="text-center">
    <div class="alert alert-info col-lg-6 mx-auto" role="alert">
      <%= t('job_orders.public_page.no_job_orders') %> <%= link_to t('job_orders.public_page.here'), new_job_orders_path, class: 'alert-link' %>.
    </div>
  </div>
<% end %>
