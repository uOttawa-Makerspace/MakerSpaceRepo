<br>
<div class="text-center">
  <h2><b>You can use these discount codes in our <%= link_to 'MakerStore', 'http://makerstore.ca/', target: :blank %></b></h2>
  <p class="fs-4"><b><%= link_to 'Redeem more discount codes here', new_discount_code_path %></b></p>
</div>

<div class="container py-5">
  <%# if @discount_codes.present? %>
  <% if @coupon_codes.present? %>
    <div class="row">
      <%# @discount_codes.each do |discount_code| %>
      <% @coupon_codes.each do |discount_code| %>
        <div class="col-md-12" style="padding-right: 5px; padding-left: 0px; margin-bottom: 5px;">
          <div class="card" style="width: 100%;  border: 5px dotted #bbb;">
            <div class="card-body">
              <!--<h5 class="card-title"><%# <%= discount_code.price_rule.title %></h5> !-->
              <h5 class="card-title"><%= discount_code.title %></h5>
              <p class="card-text">
                Use code : <span id="coupon-<%= discount_code.id %>"><%= discount_code.code %></span>
                <a tabIndex="0" class="clipboard-btn btn btn-primary float-end" role="button" data-bs-toggle="popover" data-bs-trigger="focus" data-bs-content="Copied !" data-bs-placement="left" data-clipboard-action="copy" data-clipboard-target="#coupon-<%= discount_code.id %>">Copy</a>
            </div>
          </div>
        </div>
    <% end %>
    </div>
  <% else %>
    <div class="text-center">
      <p>You don't have any coupons.</p>
      <p>Redeem your CC points <%= link_to 'here', new_discount_code_path %></p>
    </div>
  <% end %>
<!--  <div class="container my-3">-->
<!--    <div class="table-responsive">-->
<!--      <table class="table table-striped">-->
<!--        <p class="text-center">You have <%#= @expired_codes.count %> used/expired coupons : </p>-->
<!--        <thead class="table-primary">-->
<!--        <tr class="text-center">-->
<!--          <th>Date</th>-->
<!--          <th>Title</th>-->
<!--          <th>Value</th>-->
<!--          <th>CC</th>-->
<!--          <th>Usage</th>-->
<!--        </tr>-->
<!--        </thead>-->
<!--        <tbody>-->
        <%# @expired_codes.each do |discount_code| %>
<!--          <tr>-->
<!--            <td><%#= discount_code.created_at.strftime('%Y/%m/%d-%H:%M') %></td>-->
<!--            <td><%#= discount_code.price_rule.title %></td>-->
<!--            <td>$<%#= discount_code.price_rule.value %></td>-->
<!--            <td><%#= discount_code.price_rule.cc %> CCs</td>-->
<!--            <td><%#= discount_code.status %></td>-->
<!--          </tr>-->
        <%# end %>
<!--        </tbody>-->
<!--      </table>-->
<!--    </div>-->
<!--  </div>-->
<!--</div>-->

<%# <% if current_user.admin? && @all_discount_codes.present? %>
<% if false %> <!-- We don't need to see this, we can use the manage coupon view !-->
  <div class="container my-5">
    <h1 class="text-center">(Admin View) All Discount Codes</h1>
    <div class="table-responsive">
      <table class="table table-striped">
      <thead class="table-primary">
        <tr class="text-center">
          <th>Date</th>
<!--          <th>User</th>-->
<!--          <th>Title</th>-->
          <th>Code</th>
          <th>Value</th>
          <th>CC</th>
<!--          <th>User Usage</th>-->
        </tr>
        </thead>
        <tbody>
        <% @all_discount_codes.each do |discount_code| %>
          <tr>
            <td><%= discount_code.created_at.strftime('%Y/%m/%d-%H:%M') %></td>
<!--            <td class="username"><%#= link_to discount_code.user.name, discount_code.user.username %></td>-->
<!--            <td><%#= discount_code.price_rule.title %></td>-->
            <td><%= discount_code.code %></td>
<!--            <td>$<%#= discount_code.price_rule.value %></td>-->
            <td>$<%= discount_code.dollar_cost %></td>
<!--            <td><%#= discount_code.price_rule.cc %> CCs</td>-->
            <td><%= discount_code.cc_cost %> CCs</td>
<!--            <td><%#= discount_code.status %></td>-->
          </tr>
        <% end %>
        </tbody>
      </table>
    </div>
  </div>
<% end %>
