<!DOCTYPE html>
<html>
<head>
  <%= render 'shared/theme_init' %>
  <title>Settings | MakerRepo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <%= favicon_link_tag 'C_square.png' %>
  <%= stylesheet_link_tag 'vendor', media: 'all', debug: false %>
  <%= javascript_include_tag 'vendor', debug: false %>
  <%= vite_javascript_tag 'application', 'data-turbo-track': 'reload' %>
  <%= stylesheet_link_tag 'application', media: 'all', 'data-turbo-track': 'reload' %>
  <%= vite_stylesheet_tag 'application.scss', media: 'all', 'data-turbo-track': 'reload' %>
  <%= csrf_meta_tags %>
</head>
<body class="d-flex flex-column min-vh-100"> 
  <%= render 'layouts/header' %>

  <section id="setting">
    <div class="setting-grid">
      <div class="container-fluid px-lg-5"> <!-- Adds padding on sides -->
        <div class="row">
          
          <!-- SIDEBAR COLUMN (3 cols wide on desktop, full width on mobile) -->
          <div class="col-lg-3 mb-4 mb-lg-0">
            <div class="setting-side-panel sticky-top" style="top: 2rem; z-index: 1;">
              
              <div class="card border-0 shadow-sm">
                <div class="card-body p-0">
                  <div class="list-group list-group-flush rounded-3">
                    
                    <!-- Edit Settings Link -->
                    <%= link_to settings_profile_path, 
                        class: "list-group-item list-group-item-action py-3 #{'active-link' if current_page?(action: 'profile', controller: 'settings')}" do %>
                      <i class="bi bi-person-gear me-2"></i> Edit Settings
                    <% end %>

                    <!-- Account Settings Link -->
                    <%= link_to settings_admin_path, 
                        class: "list-group-item list-group-item-action py-3 #{'active-link' if current_page?(action: 'admin', controller: 'settings')}" do %>
                      <i class="bi bi-shield-lock me-2"></i> Account Settings
                    <% end %>

                  </div>
                </div>
              </div>

              <!-- View Profile Button (Separate from nav) -->
              <% if current_page?(action: 'profile', controller: 'settings') || current_page?(action: 'admin', controller: 'settings') %>
                <div class="mt-3 d-grid">
                  <%= link_to user_path(@user.username), class: 'btn btn-outline-secondary' do %>
                    View Public Profile <i class="bi bi-arrow-right-short"></i>
                  <% end %>
                </div>
              <% end %>

            </div>
          </div>

          <!-- CONTENT COLUMN (9 cols wide on desktop) -->
          <div class="col-lg-9">
            <!-- This renders the page content (Profile or Certifications) -->
            <%= yield %>
          </div>

        </div>
      </div>
    </div>
  </section>

  <footer class="mt-auto">
    <%= render 'layouts/footer' %>
  </footer>
</body>
</html>